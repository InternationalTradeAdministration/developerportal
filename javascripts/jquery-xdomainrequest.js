(function(e){"function"==typeof define&&define.amd?define(["jquery"],e):"object"==typeof exports?module.exports=e(require("jquery")):e(jQuery)})(function(e){if(!e.support.cors&&e.ajaxTransport&&window.XDomainRequest){var t=/^https?:\/\//i,a=/^get|post$/i,n=RegExp("^"+location.protocol,"i");e.ajaxTransport("* text html xml json",function(r,i){if(r.crossDomain&&r.async&&a.test(r.type)&&t.test(r.url)&&n.test(r.url)){var o=null;return{send:function(t,a){var n="",s=(i.dataType||"").toLowerCase();o=new XDomainRequest,/^\d+$/.test(i.timeout)&&(o.timeout=i.timeout),o.ontimeout=function(){a(500,"timeout")},o.onload=function(){var t="Content-Length: "+o.responseText.length+"\r\nContent-Type: "+o.contentType,n={code:200,message:"success"},r={text:o.responseText};try{if("html"===s||/text\/html/i.test(o.contentType))r.html=o.responseText;else if("json"===s||"text"!==s&&/\/json/i.test(o.contentType))try{r.json=e.parseJSON(o.responseText)}catch(i){n.code=500,n.message="parseerror"}else if("xml"===s||"text"!==s&&/\/xml/i.test(o.contentType)){var d=new ActiveXObject("Microsoft.XMLDOM");d.async=!1;try{d.loadXML(o.responseText)}catch(i){d=void 0}if(!d||!d.documentElement||d.getElementsByTagName("parsererror").length)throw n.code=500,n.message="parseerror","Invalid XML: "+o.responseText;r.xml=d}}catch(u){throw u}finally{a(n.code,n.message,r,t)}},o.onprogress=function(){},o.onerror=function(){a(500,"error",{text:o.responseText})},i.data&&(n="string"===e.type(i.data)?i.data:e.param(i.data)),o.open(r.type,r.url),o.send(n)},abort:function(){o&&o.abort()}}}})}});